FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IG1ldHJpY3MtYXBiCmRlc2NyaXB0aW9uOiBJbnN0YWxscyBhIG1l\
dHJpY3Mgc2VydmljZSBiYXNlZCBvbiBQcm9tZXRoZXVzIGFuZCBHcmFmYW5hCmJpbmRhYmxlOiBU\
cnVlCmFzeW5jOiBvcHRpb25hbAp0YWdzOgogIC0gbW9iaWxlLXNlcnZpY2UKICAtIG1vYmlsZS1j\
bGllbnQtZW5hYmxlZAptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogTW9iaWxlIE1ldHJpY3MKICBp\
bWFnZVVybDogImh0dHBzOi8vYXZhdGFyczEuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3UvMzM4MDQ2\
Mj9zPTIwMCZ2PTQiCiAgZG9jdW1lbnRhdGlvblVybDogImh0dHBzOi8vZG9jcy5hZXJvZ2Vhci5v\
cmcvYWVyb2dlYXIvbGF0ZXN0L21ldHJpY3MvaW5kZXguaHRtbCIKICBwcm92aWRlckRpc3BsYXlO\
YW1lOiAiUmVkIEhhdCwgSW5jLiIKICBzZGstZG9jcy1hbmRyb2lkOiAiaHR0cHM6Ly9kb2NzLmFl\
cm9nZWFyLm9yZy9hZXJvZ2Vhci9sYXRlc3QvbWV0cmljcy9pbmRleC5odG1sIgogIHNkay1kb2Nz\
LWNvcmRvdmE6ICJodHRwczovL2RvY3MuYWVyb2dlYXIub3JnL2Flcm9nZWFyL2xhdGVzdC9tZXRy\
aWNzL2luZGV4Lmh0bWwiCiAgc2RrLWRvY3MtaW9zOiAiaHR0cHM6Ly9kb2NzLmFlcm9nZWFyLm9y\
Zy9hZXJvZ2Vhci9sYXRlc3QvbWV0cmljcy9pbmRleC5odG1sIgogIHNkay1kb2NzLXhhbWFyaW46\
ICJodHRwczovL2RvY3MuYWVyb2dlYXIub3JnL2Flcm9nZWFyL2xhdGVzdC9tZXRyaWNzL2luZGV4\
Lmh0bWwiCiAgc2VydmljZU5hbWU6IG1ldHJpY3MKcGxhbnM6CiAgLSBuYW1lOiBkZWZhdWx0CiAg\
ICBkZXNjcmlwdGlvbjogVGhpcyBwbGFuIHNldHMgdXAgUHJvbWV0aGV1cyBhbmQgR3JhZmFuYSBm\
b3IgbWV0cmljcyBhbmQgZGF0YSB2aXN1YWxpc2F0aW9uCiAgICBmcmVlOiBUcnVlCiAgICBtZXRh\
ZGF0YToKICAgICAgbW9iaWxlY2xpZW50X2JpbmRfcGFyYW1ldGVyc19kYXRhOgogICAgICAgIC0g\
J3sibmFtZSI6ICJDTElFTlRfSUQiLCAidmFsdWUiOiAibWV0YWRhdGEubmFtZSIsICJ0eXBlIjog\
InBhdGgifScKICAgIHBhcmFtZXRlcnM6IAogICAgICAtIG5hbWU6IEdSQUZBTkFfU1RPUkFHRV9T\
SVpFCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiAxMAogICAgICAgIHR5\
cGU6IG51bWJlcgogICAgICAgIHRpdGxlOiBHcmFmYW5hIFN0b3JhZ2UgU2l6ZSAoR2IpCiAgICAg\
IC0gbmFtZTogUFJPTUVUSEVVU19TVE9SQUdFX1NJWkUKICAgICAgICByZXF1aXJlZDogVHJ1ZQog\
ICAgICAgIGRlZmF1bHQ6IDEwCiAgICAgICAgdHlwZTogbnVtYmVyCiAgICAgICAgdGl0bGU6IFBy\
b21ldGhldXMgU3RvcmFnZSBTaXplIChHYikKICAgICAgLSBuYW1lOiBQT1NUR1JFU19TVE9SQUdF\
X1NJWkUKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6IDEwCiAgICAgICAg\
dHlwZTogbnVtYmVyCiAgICAgICAgdGl0bGU6IFBvc3RncmVzIFN0b3JhZ2UgU2l6ZSAoR2IpCiAg\
ICAgIC0gbmFtZTogUE9TVEdSRVNfVVNFUgogICAgICAgIGRlc2NyaXB0aW9uOiBVc2VybmFtZSB0\
aGF0IHdpbGwgYmUgdXNlZCB0byBjb25uZWN0IHRvIHBvc3RncmVzICgndXNlcicgd2lsbCBiZSB1\
c2VkIGlmIGJsYW5rKQogICAgICAgIGRlZmF1bHQ6IHVzZXIKICAgICAgICB0eXBlOiBzdHJpbmcK\
ICAgICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgICB0aXRsZTogUG9zdGdyZXMgVXNlcgogICAg\
ICAtIG5hbWU6IFBPU1RHUkVTX1BBU1NXT1JECiAgICAgICAgZGVzY3JpcHRpb246IFBhc3N3b3Jk\
IHRvIGNvbm5lY3QgdG8gUG9zdGdyZXMgKGdlbmVyYXRlZCBpZiBibGFuaykKICAgICAgICB0eXBl\
OiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgICB0aXRsZTogUG9zdGdyZXMg\
UGFzc3dvcmQKICAgIGJpbmRfcGFyYW1ldGVyczoKICAgICAgLSBuYW1lOiBDTElFTlRfSUQKICAg\
ICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIHRpdGxlOiBNb2JpbGUgQ2xpZW50IElECiAgICAg\
ICAgdHlwZTogc3RyaW5nCiAgICAgICAgCg=="






COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
