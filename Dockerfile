FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IG1ldHJpY3MtYXBiCmRlc2NyaXB0aW9uOiBJbnN0YWxscyBhIG1l\
dHJpY3Mgc2VydmljZSBiYXNlZCBvbiBQcm9tZXRoZXVzIGFuZCBHcmFmYW5hCmJpbmRhYmxlOiBU\
cnVlCmFzeW5jOiBvcHRpb25hbAp0YWdzOgogIC0gbW9iaWxlLXNlcnZpY2UKICAtIG1vYmlsZS1j\
bGllbnQtZW5hYmxlZAptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogTWV0cmljcwogIGltYWdlVXJs\
OiAiaHR0cHM6Ly9hdmF0YXJzMS5naXRodWJ1c2VyY29udGVudC5jb20vdS8zMzgwNDYyP3M9MjAw\
JnY9NCIKICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0cHM6Ly9wcm9tZXRoZXVzLmlvL2RvY3MvaW50\
cm9kdWN0aW9uL292ZXJ2aWV3LyIKICBwcm92aWRlckRpc3BsYXlOYW1lOiAiUmVkIEhhdCwgSW5j\
LiIKICBzZGstZG9jcy1hbmRyb2lkOiAiaHR0cHM6Ly9kb2NzLmFlcm9nZWFyLm9yZy9hbmRyb2lk\
LXNkay9sYXRlc3QvZ2V0dGluZy1zdGFydGVkL21ldHJpY3MuaHRtbCIKICBzZGstZG9jcy1jb3Jk\
b3ZhOiAiaHR0cHM6Ly9naXRodWIuY29tL2Flcm9nZWFyY2F0YWxvZy9tZXRyaWNzLWFwYi9ibG9i\
L21hc3Rlci9kb2NzL21vZHVsZXMvUk9PVC9wYWdlcy9hcHBfbWV0cmljc19ndWlkZS5hZG9jIgog\
IHNkay1kb2NzLWlvczogImh0dHBzOi8vZ2l0aHViLmNvbS9hZXJvZ2VhcmNhdGFsb2cvbWV0cmlj\
cy1hcGIvYmxvYi9tYXN0ZXIvZG9jcy9tb2R1bGVzL1JPT1QvcGFnZXMvYXBwX21ldHJpY3NfZ3Vp\
ZGUuYWRvYyIKICBzZGstZG9jcy14YW1hcmluOiAiaHR0cHM6Ly9naXRodWIuY29tL2Flcm9nZWFy\
Y2F0YWxvZy9tZXRyaWNzLWFwYi9ibG9iL21hc3Rlci9kb2NzL21vZHVsZXMvUk9PVC9wYWdlcy9h\
cHBfbWV0cmljc19ndWlkZS5hZG9jIgogIHNlcnZpY2VOYW1lOiBtZXRyaWNzCnBsYW5zOgogIC0g\
bmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246IFRoaXMgcGxhbiBzZXRzIHVwIFByb21ldGhl\
dXMgYW5kIEdyYWZhbmEgZm9yIG1ldHJpY3MgYW5kIGRhdGEgdmlzdWFsaXNhdGlvbgogICAgZnJl\
ZTogVHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIG1vYmlsZWNsaWVudF9iaW5kX3BhcmFtZXRlcnNf\
ZGF0YToKICAgICAgICAtICd7Im5hbWUiOiAiQ0xJRU5UX0lEIiwgInZhbHVlIjogIm1ldGFkYXRh\
Lm5hbWUiLCAidHlwZSI6ICJwYXRoIn0nCiAgICBwYXJhbWV0ZXJzOiAKICAgICAgLSBuYW1lOiBH\
UkFGQU5BX1NUT1JBR0VfU0laRQogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVs\
dDogMTAKICAgICAgICB0eXBlOiBudW1iZXIKICAgICAgICB0aXRsZTogR3JhZmFuYSBTdG9yYWdl\
IFNpemUgKEdiKQogICAgICAtIG5hbWU6IFBST01FVEhFVVNfU1RPUkFHRV9TSVpFCiAgICAgICAg\
cmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiAxMAogICAgICAgIHR5cGU6IG51bWJlcgog\
ICAgICAgIHRpdGxlOiBQcm9tZXRoZXVzIFN0b3JhZ2UgU2l6ZSAoR2IpCiAgICAgIC0gbmFtZTog\
UE9TVEdSRVNfU1RPUkFHRV9TSVpFCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZh\
dWx0OiAxMAogICAgICAgIHR5cGU6IG51bWJlcgogICAgICAgIHRpdGxlOiBQb3N0Z3JlcyBTdG9y\
YWdlIFNpemUgKEdiKQogICAgICAtIG5hbWU6IFBPU1RHUkVTX1VTRVIKICAgICAgICBkZXNjcmlw\
dGlvbjogVXNlcm5hbWUgdGhhdCB3aWxsIGJlIHVzZWQgdG8gY29ubmVjdCB0byBwb3N0Z3JlcyAo\
J3VzZXInIHdpbGwgYmUgdXNlZCBpZiBibGFuaykKICAgICAgICBkZWZhdWx0OiB1c2VyCiAgICAg\
ICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IEZhbHNlCiAgICAgICAgdGl0bGU6IFBv\
c3RncmVzIFVzZXIKICAgICAgLSBuYW1lOiBQT1NUR1JFU19QQVNTV09SRAogICAgICAgIGRlc2Ny\
aXB0aW9uOiBQYXNzd29yZCB0byBjb25uZWN0IHRvIFBvc3RncmVzIChnZW5lcmF0ZWQgaWYgYmxh\
bmspCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IEZhbHNlCiAgICAgICAg\
dGl0bGU6IFBvc3RncmVzIFBhc3N3b3JkCiAgICBiaW5kX3BhcmFtZXRlcnM6CiAgICAgIC0gbmFt\
ZTogQ0xJRU5UX0lECiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICB0aXRsZTogTW9iaWxl\
IENsaWVudCBJRAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIAo="






COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
