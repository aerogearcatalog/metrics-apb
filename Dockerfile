FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IG1ldHJpY3MtYXBiCmRlc2NyaXB0aW9uOiBJbnN0YWxscyBhIG1l\
dHJpY3Mgc2VydmljZSBiYXNlZCBvbiBQcm9tZXRoZXVzIGFuZCBHcmFmYW5hCmJpbmRhYmxlOiBU\
cnVlCmFzeW5jOiBvcHRpb25hbAp0YWdzOgogIC0gbW9iaWxlLXNlcnZpY2UKICAtIG1vYmlsZS1j\
bGllbnQtZW5hYmxlZAptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogTWV0cmljcwogIGltYWdlVXJs\
OiAiaHR0cHM6Ly9hdmF0YXJzMS5naXRodWJ1c2VyY29udGVudC5jb20vdS8zMzgwNDYyP3M9MjAw\
JnY9NCIKICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0cHM6Ly9wcm9tZXRoZXVzLmlvL2RvY3MvaW50\
cm9kdWN0aW9uL292ZXJ2aWV3LyIKICBwcm92aWRlckRpc3BsYXlOYW1lOiAiUmVkIEhhdCwgSW5j\
LiIKICBzZXJ2aWNlTmFtZTogbWV0cmljcwpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRl\
c2NyaXB0aW9uOiBUaGlzIHBsYW4gc2V0cyB1cCBQcm9tZXRoZXVzIGFuZCBHcmFmYW5hIGZvciBt\
ZXRyaWNzIGFuZCBkYXRhIHZpc3VhbGlzYXRpb24KICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRh\
OiB7fQogICAgcGFyYW1ldGVyczogCiAgICAgIC0gbmFtZTogR1JBRkFOQV9TVE9SQUdFX1NJWkUK\
ICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6IDEwCiAgICAgICAgdHlwZTog\
bnVtYmVyCiAgICAgICAgdGl0bGU6IEdyYWZhbmEgU3RvcmFnZSBTaXplIChHYikKICAgICAgLSBu\
YW1lOiBQUk9NRVRIRVVTX1NUT1JBR0VfU0laRQogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAg\
ICAgZGVmYXVsdDogMTAKICAgICAgICB0eXBlOiBudW1iZXIKICAgICAgICB0aXRsZTogUHJvbWV0\
aGV1cyBTdG9yYWdlIFNpemUgKEdiKQogICAgICAtIG5hbWU6IFBPU1RHUkVTX1NUT1JBR0VfU0la\
RQogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogMTAKICAgICAgICB0eXBl\
OiBudW1iZXIKICAgICAgICB0aXRsZTogUG9zdGdyZXMgU3RvcmFnZSBTaXplIChHYikKICAgICAg\
LSBuYW1lOiBQT1NUR1JFU19VU0VSCiAgICAgICAgZGVzY3JpcHRpb246IFVzZXJuYW1lIHRoYXQg\
d2lsbCBiZSB1c2VkIHRvIGNvbm5lY3QgdG8gcG9zdGdyZXMgKCd1c2VyJyB3aWxsIGJlIHVzZWQg\
aWYgYmxhbmspCiAgICAgICAgZGVmYXVsdDogdXNlcgogICAgICAgIHR5cGU6IHN0cmluZwogICAg\
ICAgIHJlcXVpcmVkOiBGYWxzZQogICAgICAgIHRpdGxlOiBQb3N0Z3JlcyBVc2VyCiAgICAgIC0g\
bmFtZTogUE9TVEdSRVNfUEFTU1dPUkQKICAgICAgICBkZXNjcmlwdGlvbjogUGFzc3dvcmQgdG8g\
Y29ubmVjdCB0byBQb3N0Z3JlcyAoZ2VuZXJhdGVkIGlmIGJsYW5rKQogICAgICAgIHR5cGU6IHN0\
cmluZwogICAgICAgIHJlcXVpcmVkOiBGYWxzZQogICAgICAgIHRpdGxlOiBQb3N0Z3JlcyBQYXNz\
d29yZAogICAgYmluZF9wYXJhbWV0ZXJzOgogICAgICAtIG5hbWU6IENMSUVOVF9JRAogICAgICAg\
IHJlcXVpcmVkOiBUcnVlCiAgICAgICAgdGl0bGU6IE1vYmlsZSBDbGllbnQgSUQKICAgICAgICB0\
eXBlOiBzdHJpbmcKICAgICAgICAK"






COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
